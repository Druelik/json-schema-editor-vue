(function(e){function t(t){for(var a,o,l=t[0],s=t[1],c=t[2],u=0,p=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&p.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var s=n[l];0!==i[s]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={index:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=s;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("c31f")},"42b1":function(e,t,n){"use strict";n("f381")},c31f:function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"title"},[e._v("Demo")]),n("div",{staticClass:"container"},[n("pre",[e._v(e._s(e.tree))]),n("json-schema-editor",{staticClass:"schema",attrs:{value:e.tree,disabledType:"",lang:"en_US",custom:""}})],1)])},r=[],o={name:"App",data:function(){return{tree:{root:{type:"object"}}}}},l=o,s=(n("42b1"),n("2877")),c=Object(s["a"])(l,i,r,!1,null,null,null),d=c.exports,u=n("5530"),p=(n("d81d"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"json-schema-editor"},[n("div",{style:{marginLeft:20*e.deep+"px",backgroundColor:"rgb("+(e.color+8*e.deep)+", "+(e.color+8*e.deep)+", "+(e.color+8*e.deep)+")"}},[n("b-row",{attrs:{"align-v":"center"}},[n("b-col",{attrs:{md:"1"}},["object"===e.pickValue.type?n("gl-button",{attrs:{type:"link","aria-label":"Open/Close",category:"tertiary"},on:{click:function(t){e.hidden=!e.hidden}}},[e.hidden?n("b-icon-chevron-right"):n("b-icon-chevron-down")],1):e._e()],1),n("b-col",{attrs:{md:"3"}},[n("gl-form-input",{attrs:{disabled:e.disabled||e.root,value:e.pickKey,placeholder:"Name"},on:{blur:e.onInputName}})],1),n("b-col",{attrs:{md:"2"}},[n("gl-form-group",[e.root?n("gl-form-checkbox",{attrs:{disabled:!e.isObject&&!e.isArray,switch:""},on:{change:e.onRootCheck}},[e._v(" "+e._s(e.local["checked_all"])+" ")]):n("gl-form-checkbox",{attrs:{disabled:e.isItem,checked:e.checked},on:{change:e.onCheck}},[e._v(" "+e._s(e.local["required"])+" ")])],1)],1),n("b-col",{attrs:{md:"3"}},[n("b-form-select",{attrs:{disabled:e.disabledType,getPopupContainer:function(t){return t.parentNode||e.document.body}},on:{change:e.onChangeType},model:{value:e.pickValue.type,callback:function(t){e.$set(e.pickValue,"type",t)},expression:"pickValue.type"}},e._l(e.TYPE_NAME,(function(t){return n("b-form-select-option",{key:t,attrs:{value:t}},[e._v(" "+e._s(t)+" ")])})),1)],1),n("b-col",{attrs:{md:"auto"}},[n("div",[e.root||e.isItem?e._e():n("gl-button",{attrs:{type:"link",title:"Remove Node",category:"tertiary"},on:{click:e.removeNode}},[n("b-icon-x",{attrs:{scale:"1.5"}})],1),e.isObject?n("gl-button",{staticClass:"plus-icon",attrs:{type:"link",title:"Add new Node",category:"tertiary"},on:{click:e.addChild}},[n("b-icon-plus",{attrs:{scale:"1.5"}})],1):e._e(),n("gl-button",{staticClass:"setting-icon",attrs:{title:"Settings",type:"link",category:"tertiary"},on:{click:e.onSetting}},[n("b-icon-gear-fill",{attrs:{scale:"1"}})],1)],1)])],1)],1),e.hidden||!e.pickValue.properties||e.isArray?e._e():e._l(e.pickValue.properties,(function(t,a,i){var r;return n("json-schema-editor",{key:i,staticClass:"children",attrs:{value:(r={},r[a]=t,r),parent:e.pickValue,deep:e.deep+1,root:!1,lang:e.lang,custom:e.custom}})})),e.isArray?[n("json-schema-editor",{staticClass:"children",attrs:{value:{items:e.pickValue.items},deep:e.deep+1,disabled:"",isItem:"",root:!1,lang:e.lang,custom:e.custom}})]:e._e(),n("gl-modal",{attrs:{"modal-id":"adv_settings",title:e.local["adv_setting"],maskClosable:!1,okText:e.local["ok"],cancelText:e.local["cancel"],size:"lg",dialogClass:"json-schema-editor-advanced-modal"},on:{ok:e.handleOk},model:{value:e.modalVisible,callback:function(t){e.modalVisible=t},expression:"modalVisible"}},[n("gl-form",[n("b-row",[n("b-col",{staticClass:"mt-2",attrs:{md:"4"}},[n("span",[e._v(e._s(e.local["title"]))]),n("gl-form-input",{attrs:{placeholder:e.local["title"]},model:{value:e.pickValue.title,callback:function(t){e.$set(e.pickValue,"title",t)},expression:"pickValue.title"}})],1),e._l(e.advancedValue,(function(t,a){return n("b-col",{key:a,staticClass:"mt-2",attrs:{md:"4"}},[n("span",[e._v(e._s(e.local[a]))]),"integer"===e.advancedAttr[a].type?n("gl-form-input",{attrs:{type:"number",placeholder:a},model:{value:e.advancedValue[a],callback:function(t){e.$set(e.advancedValue,a,t)},expression:"advancedValue[key]"}}):"number"===e.advancedAttr[a].type?n("gl-form-input",{attrs:{placeholder:a},model:{value:e.advancedValue[a],callback:function(t){e.$set(e.advancedValue,a,t)},expression:"advancedValue[key]"}}):"boolean"===e.advancedAttr[a].type?n("span",{staticStyle:{display:"inline-block",width:"100%"}},[n("gl-toggle",{model:{value:e.advancedValue[a],callback:function(t){e.$set(e.advancedValue,a,t)},expression:"advancedValue[key]"}})],1):"array"===e.advancedAttr[a].type?n("gl-form-select",{attrs:{options:e.advancedAttr[a].enums,getPopupContainer:function(t){return t.parentNode||e.document.body},placeholder:e.local[a]},model:{value:e.advancedValue[a],callback:function(t){e.$set(e.advancedValue,a,t)},expression:"advancedValue[key]"}}):n("gl-form-input",{staticStyle:{width:"100%"},attrs:{placeholder:a},model:{value:e.advancedValue[a],callback:function(t){e.$set(e.advancedValue,a,t)},expression:"advancedValue[key]"}})],1)}))],2)],1),n("div",{staticClass:"mt-3"},[n("gl-button",{directives:[{name:"gl-collapse-toggle",rawName:"v-gl-collapse-toggle.collapse-1",modifiers:{"collapse-1":!0}}],attrs:{category:"primary"}},[e._v(" Show preview ")]),n("gl-collapse",{attrs:{id:"collapse-1"}},[n("h3",{domProps:{textContent:e._s(e.local["preview"])}}),n("pre",{staticStyle:{width:"100%"}},[e._v(e._s(e.completeNodeValue))])])],1)],1)],2)}),m=[],h=n("b85c"),v=(n("a9e3"),n("07ac"),n("b64b"),n("4de4"),n("159b"),n("a434"),n("99af"),n("2573")),f=n("39ba"),b=n("a15b"),y=n("b28b"),g=n("8361"),k=n("ea4c"),_=n("7386");function x(e){return"undefined"===typeof e||(null==e||""==e)}var V={description:null,maxProperties:null,minProperties:null},j={description:{name:"描述",type:"string"},maxProperties:{name:"最大元素个数",type:"integer"},minProperties:{name:"最小元素个数",type:"integer"}},C={value:V,attr:j},O=C,w={description:null,maxLength:null,minLength:null,pattern:null,format:null},P={description:{name:"描述",type:"text"},maxLength:{name:"最大字符数",type:"integer"},minLength:{name:"最小字符数",type:"integer"},pattern:{name:"正则表达式",type:"string"},format:{name:"format",type:"array",enums:["","date","date-time","email","hostname","ipv4","ipv6","uri"]}},$={value:w,attr:P},I=$,q={description:null,minItems:null,maxItems:null,uniqueItems:!1},N={description:{name:"描述",type:"string"},maxItems:{name:"最大元素个数",type:"integer"},minItems:{name:"最小元素个数",type:"integer"},uniqueItems:{name:"元素不可重复",type:"boolean"}},S={value:q,attr:N},A=S,M={description:null},B={description:{name:"描述",type:"string"}},T={value:M,attr:B},E=T,L={description:null,maximum:null,minimum:null,exclusiveMaximum:null,exclusiveMinimum:null},K={description:{name:"描述",type:"string"},maximum:{name:"最大值",type:"number"},minimum:{name:"最小值",type:"number"},exclusiveMaximum:{name:"不包含最大值",type:"boolean"},exclusiveMinimum:{name:"不包含最小值",type:"boolean"}},G={value:L,attr:K},F=G,R=["object","array","text","number","boolean"],U={object:O,text:I,array:A,boolean:E,number:F},D=n("da60"),J=n("1e4d"),z=n("da6f"),Y=n("01e9"),H=n("bcfa"),X=n("869e"),Q=n("9f86"),W=n("ccd5"),Z=(n("f9e3"),n("2dd8"),{en_US:{title:"Title",import_json:"Import JSON",base_setting:"Base Settings",all_setting:"Source Code",default:"Default",description:"Description",adv_setting:"Advanced Settings",add_child_node:"Add child node",add_sibling_node:"Add sibling nodes",add_node:"Add sibling/child nodes",remove_node:"Remove node",child_node:"Child node",sibling_node:"Sibling node",ok:"OK",cancel:"Cancel",minLength:"Min length",maxLength:"Max length",pattern:"MUST be a valid regular expression.",exclusiveMinimum:"Value exclusively less than",exclusiveMaximum:"Value exclusively more than",minimum:"Min",maximum:"Max",uniqueItems:"Unique Items",minItems:"MinItems",maxItems:"MaxItems",minProperties:"MinProperties",maxProperties:"MaxProperties",checked_all:"Require All",valid_json:"Not valid json",enum:"Enum",enum_msg:"One value per line",enum_desc:"desc",enum_desc_msg:"enum description",required:"Required",mock:"mock",mockLink:"Help",format:"Format",nothing:"",preview:"Preview",add_custom:"Add Custom Prop"},zh_CN:{title:"标题",import_json:"导入 json",base_setting:"基础设置",all_setting:"编辑源码",default:"默认值",description:"描述",adv_setting:"高级设置",add_child_node:"添加子节点",add_sibling_node:"添加兄弟节点",add_node:"添加兄弟/子节点",remove_node:"删除节点",child_node:"子节点",sibling_node:"兄弟节点",ok:"确定",cancel:"取消",minLength:"最小长度",maxLength:"最大长度",pattern:"用正则表达式约束字符串",exclusiveMinimum:"开启后，数据必须大于最小值",exclusiveMaximum:"开启后，数据必须小于最大值",minimum:"最小值",maximum:"最大值",uniqueItems:"开启后，每个元素都不相同",minItems:"最小元素个数",maxItems:"最大元素个数",minProperties:"最小元素个数",maxProperties:"最大元素个数",checked_all:"全选",valid_json:"不是合法的json字符串",enum:"枚举",enum_msg:"每行只能写一个值",enum_desc:"备注",enum_desc_msg:"备注描述信息",required:"是否必须",mock:"mock",mockLink:"查看文档",format:"格式化",nothing:"无",preview:"预览",add_custom:"添加自定义属性"}}),ee=function(e){return Z[e]};Object(v["a"])();var te={name:"JsonSchemaEditor",directives:{"gl-collapse-toggle":f["e"]},components:{BRow:b["a"],BCol:y["a"],GlButton:D["a"],GlFormInput:J["a"],GlFormCheckbox:z["a"],BFormSelect:g["a"],BFormSelectOption:k["a"],GlModal:Y["a"],GlForm:H["a"],GlFormSelect:X["a"],GlCollapse:Q["a"],GlToggle:W["a"],BIconPlus:_["d"],BIconGearFill:_["c"],BIconX:_["e"],BIconChevronDown:_["a"],BIconChevronRight:_["b"]},props:{value:{type:Object,required:!0},disabled:{type:Boolean,default:!1},disabledType:{type:Boolean,default:!1},isItem:{type:Boolean,default:!1},deep:{type:Number,default:0},color:{type:Number,default:200},root:{type:Boolean,default:!0},parent:{type:Object,default:null},custom:{type:Boolean,default:!1},lang:{type:String,default:"en_US"}},computed:{pickValue:function(){return Object.values(this.value)[0]},pickKey:function(){return Object.keys(this.value)[0]},isObject:function(){return"object"===this.pickValue.type},isArray:function(){return"array"===this.pickValue.type},checked:function(){return this.parent&&this.parent.required&&this.parent.required.indexOf(this.pickKey)>=0},advanced:function(){return U[this.pickValue.type]},advancedAttr:function(){return U[this.pickValue.type].attr},advancedNotEmptyValue:function(){var e=Object.assign({},this.advancedValue);for(var t in e)x(e[t])&&delete e[t];return e},completeNodeValue:function(){var e,t={},n=Object(h["a"])(this.customProps);try{for(n.s();!(e=n.n()).done;){var a=e.value;t[a.key]=a.value}}catch(i){n.e(i)}finally{n.f()}return Object.assign({},this.pickValue,this.advancedNotEmptyValue,t)}},data:function(){return{TYPE_NAME:R,preview:!1,hidden:!1,countAdd:1,modalVisible:!1,advancedValue:{},addProp:{},customProps:[],customing:!1,local:ee(this.lang)}},methods:{onInputName:function(e){var t=e.target.value,n={};for(var a in this.parent.properties)a!=this.pickKey?n[a]=this.parent.properties[a]:(n[t]=this.parent.properties[a],delete this.parent.properties[a]);this.$set(this.parent,"properties",n);var i=this.parent.required;i&&i.length>0&&this.$set(this.parent,"required",i.filter((function(e){return n[e]})))},onChangeType:function(){this.$delete(this.pickValue,"properties"),this.$delete(this.pickValue,"items"),this.$delete(this.pickValue,"required"),this.isArray&&this.$set(this.pickValue,"items",{type:"string"})},onCheck:function(e){this._checked(e,this.parent)},onRootCheck:function(e){this._deepCheck(e,this.pickValue)},_deepCheck:function(e,t){var n=this;"object"===t.type&&t.properties?(e?this.$set(t,"required",Object.keys(t.properties)):this.$delete(t,"required"),Object.keys(t.properties).forEach((function(a){return n._deepCheck(e,t.properties[a])}))):"array"===t.type&&"object"===t.items.type&&(e?this.$set(t.items,"required",Object.keys(t.items.properties)):this.$delete(t.items,"required"),Object.keys(t.items.properties).forEach((function(a){return n._deepCheck(e,t.items.properties[a])})))},_checked:function(e,t){var n=t.required;if(e)n||this.$set(this.parent,"required",[]),n=this.parent.required,-1===n.indexOf(this.pickKey)&&n.push(this.pickKey);else{var a=n.indexOf(this.pickKey);a>=0&&n.splice(a,1)}0===n.length&&this.$delete(t,"required")},addChild:function(){var e=this._joinName(),t="text",n=this.pickValue;n.properties||this.$set(n,"properties",{});var a=n.properties;this.$set(a,e,{type:t})},addCustomNode:function(){this.$set(this.addProp,"key",this._joinName()),this.$set(this.addProp,"value",""),this.customing=!0},confirmAddCustomNode:function(){this.customProps.push(this.addProp),this.addProp={},this.customing=!1},removeNode:function(){var e=this.parent,t=e.properties,n=e.required;if(this.$delete(t,this.pickKey),n){var a=n.indexOf(this.pickKey);a>=0&&n.splice(a,1),0===n.length&&this.$delete(this.parent,"required")}},_joinName:function(){return"field_".concat(this.deep,"_").concat(this.countAdd++)},onSetting:function(){for(var e in this.modalVisible=!0,this.advancedValue=this.advanced.value,this.advancedValue)this.pickValue[e]&&(this.advancedValue[e]=this.pickValue[e])},handleOk:function(){for(var e in this.modalVisible=!1,console.log(this),this.advancedValue)x(this.advancedValue[e])?this.$delete(this.pickValue,e):this.$set(this.pickValue,e,this.advancedValue[e]);var t,n=Object(h["a"])(this.customProps);try{for(n.s();!(t=n.n()).done;){var a=t.value;this.$set(this.pickValue,a.key,a.value)}}catch(i){n.e(i)}finally{n.f()}}}},ne=te,ae=(n("cf49"),n("3ff2"),Object(s["a"])(ne,p,m,!1,null,null,null)),ie=ae.exports;ie.install=function(e){e.component(ie.name,ie)};var re=ie,oe=[re],le=function e(t){e.installed||(e.installed=!0,oe.map((function(e){t.component(e.name,e)})))};"undefined"!==typeof window&&window.Vue&&le(window.Vue);var se=Object(u["a"])({install:le},oe);a["a"].config.productionTip=!1,a["a"].use(se),new a["a"]({render:function(e){return e(d)}}).$mount("#app")},f381:function(e,t,n){}});